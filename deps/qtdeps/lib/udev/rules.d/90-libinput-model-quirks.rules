# Do not edit this file, it will be overwritten on update
#
# This file contains lookup rules for libinput model-specific quirks.
# The contents of this file are a contract between libinput, udev rules and
# the hwdb.
# IT IS NOT A STABLE API AND SUBJECT TO CHANGE AT ANY TIME
#
# The hwdb database is in:
#	90-libinput-model-quirks.hwdb

ACTION!="add|change", GOTO="libinput_model_quirks_end"
KERNEL!="event*", GOTO="libinput_model_quirks_end"

# Touchpad firmware detection, two-stage process.
# First, run the program and import the LIBINPUT_MODEL_FIRMWARE_VERSION
# environment (if any)
KERNELS=="*input*", \
  ENV{ID_INPUT_TOUCHPAD}=="1", \
  IMPORT{program}="libinput-model-quirks %S%p"

# Second, match on anything with that env set and import from the hwdb
KERNELS=="*input*", \
  ENV{ID_INPUT_TOUCHPAD}=="1", \
  ENV{LIBINPUT_MODEL_FIRMWARE_VERSION}!="", \
  IMPORT{builtin}="hwdb 'libinput:name:$attr{name}:fwversion:$env{LIBINPUT_MODEL_FIRMWARE_VERSION}'"
# End of touchpad firmware detection

# libinput:touchpad:<modalias>
ENV{ID_INPUT_TOUCHPAD}=="1", \
  IMPORT{builtin}="hwdb --subsystem=input --lookup-prefix=libinput:touchpad:"

# libinput:name:<name>:dmi:<dmi string>
KERNELS=="input*", \
  IMPORT{builtin}="hwdb 'libinput:name:$attr{name}:$attr{[dmi/id]modalias}'"

LABEL="libinput_model_quirks_end"
